<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Magdalena Bay Song Sorter</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f3f3f3;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 { margin-bottom: 20px; }

  .battle-counter { margin-bottom: 10px; font-weight: bold; }

  .choices {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .song-card {
    width: 600px;
    height: 600px;
    background: #fff;
    border: 3px solid #ccc;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    text-align: center;
  }

  .song-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 5px;
  }

  .song-name {
    margin-top: 8px;
    font-size: 18px;
    font-weight: bold;
  }

  #results {
    max-width: 800px;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  }

  #results ol {
    padding-left: 30px;
    text-align: left;
  }
</style>
</head>
<body>

<h1>Magdalena Bay Song Sorter</h1>
<div id="game">
  <div id="progress" class="battle-counter"></div>
  <div class="choices">
    <div id="left" class="song-card" onclick="pick(-1)">
      <img id="left-img" src="" alt="">
      <div id="left-name" class="song-name"></div>
    </div>
    <div id="right" class="song-card" onclick="pick(1)">
      <img id="right-img" src="" alt="">
      <div id="right-name" class="song-name"></div>
    </div>
  </div>
</div>

<div id="results" style="display:none">
  <h2>Final Ranking</h2>
  <ol id="ranking"></ol>
</div>

<script>
const songs = [
  { name: "Ghost", image: "images/ghost.jpeg" },
  { name: "Voc Pop", image: "images/voc-pop.jpeg" },
  { name: "Only If You Want It", image: "images/only-if-you-want-it.jpeg" },
  { name: "The Girls", image: "images/the-girls.jpeg" },
  { name: "Money Lover", image: "images/money-lover.jpeg" },
  { name: "Push Me Away", image: "images/push-me-away.jpeg" },
  { name: "Set Me Off", image: "images/set-me-off.jpeg" },
  { name: "Waking Up", image: "images/waking-up.jpeg" },
  { name: "#wastehistime", image: "images/wastehistime.jpeg" },
  { name: "Head Over Heels", image: "images/head-over-heels.jpeg" },
  { name: "Drive Alone", image: "images/drive-alone.jpeg" },
  { name: "Move Slow", image: "images/move-slow.jpeg" },
  { name: "Neon", image: "images/neon.jpeg" },
  { name: "Redbone", image: "images/redbone.jpeg" },
  { name: "Mine", image: "images/mine.jpeg" },
  { name: "Airplane", image: "images/airplane.jpeg" },
  { name: "Killshot", image: "images/killshot.jpeg" },
  { name: "Good Intentions", image: "images/good-intentions.jpeg" },
  { name: "Venice", image: "images/venice.jpeg" },
  { name: "Oh Hell", image: "images/oh-hell.jpeg" },
  { name: "How to Get Physical", image: "images/how-to-get-physical.jpeg" },
  { name: "Hideaway", image: "images/hideaway.jpeg" },
  { name: "Sky2Fall", image: "images/sky2fall.jpeg" },
  { name: "Woww", image: "images/woww.jpeg" },
  { name: "Live 4ever", image: "images/live-4ever.jpeg" },
  { name: "You Lose!", image: "images/you-lose.jpeg" },
  { name: "Secrets (Your Fire)", image: "images/secrets-your-fire.jpeg" },
  { name: "Chaeri", image: "images/chaeri.jpeg" },
  { name: "Death & Romance", image: "images/death-romance.jpeg" },
  { name: "Tunnel Vision", image: "images/tunnel-vision.jpeg" },

  // Mini Mix 1
  { name: "U Wanna Dance?", image: "images/mini-mix-vol-1.jpeg" },
  { name: "Nothing Baby", image: "images/mini-mix-vol-1.jpeg" },
  { name: "El Dorado", image: "images/mini-mix-vol-1.jpeg" },
  { name: "Afternoon in Heaven", image: "images/mini-mix-vol-1.jpeg" },
  { name: "Turning Off the Rain", image: "images/mini-mix-vol-1.jpeg" },
  { name: "Intro", image: "images/mini-mix-vol-1.jpeg" },

  // ALRAAWF
  { name: "Stop & Go", image: "images/a-little-rhythm-and-a-wicked-feeling.jpeg" },
  { name: "Story", image: "images/a-little-rhythm-and-a-wicked-feeling.jpeg" },

  // Mini Mix 2
  { name: "I Don’t Want to Cry Anymore", image: "images/mini-mix-vol-2.jpeg" },
  { name: "Body", image: "images/mini-mix-vol-2.jpeg" },
  { name: "Sky2Fall (Reprise)", image: "images/mini-mix-vol-2.jpeg" },

  // Mercurial World
  { name: "Domino", image: "images/mercurial-world.jpeg" },
  { name: "Hysterical Us", image: "images/mercurial-world.jpeg" },
  { name: "Dreamcatching", image: "images/mercurial-world.jpeg" },
  { name: "Dawning of the Season", image: "images/mercurial-world.jpeg" },
  { name: "Follow the Leader", image: "images/mercurial-world.jpeg" },
  { name: "Halfway", image: "images/mercurial-world.jpeg" },
  { name: "The Beginning", image: "images/mercurial-world.jpeg" },
  { name: "Mercurial World", image: "images/mercurial-world.jpeg" },
  { name: "Something for 2", image: "images/mercurial-world.jpeg" },
  { name: "Prophecy", image: "images/mercurial-world.jpeg" },
  { name: "The End", image: "images/mercurial-world.jpeg" },

  // Mercurial World Deluxe
  { name: "Unconditional", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "All You Do", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "secret 1", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "secrets 2-9: medley", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "secret 10", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "secret 11", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "secret 12", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "secret 13", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "secret 14", image: "images/mercurial-world-deluxe.jpeg" },
  { name: "secret 15", image: "images/mercurial-world-deluxe.jpeg" },

  // Mini Mix 3
  { name: "Top Dog", image: "images/mini-mix-vol-3.jpeg" },
  { name: "EXO", image: "images/mini-mix-vol-3.jpeg" },
  { name: "2 Wheel Drive", image: "images/mini-mix-vol-3.jpeg" },
  { name: "Wandering Eyes", image: "images/mini-mix-vol-3.jpeg" },
  { name: "Slug Song (Reprise)", image: "images/mini-mix-vol-3.jpeg" },
  { name: "Slug Song", image: "images/mini-mix-vol-3.jpeg" },
  { name: "Tonguetwister", image: "images/mini-mix-vol-3.jpeg" },

  // Imaginal Disk
  { name: "Angel on a Satellite", image: "images/imaginal-disk.jpeg" },
  { name: "Fear, Sex", image: "images/imaginal-disk.jpeg" },
  { name: "The Ballad of Matt & Mica", image: "images/imaginal-disk.jpeg" },
  { name: "Watching T.V.", image: "images/imaginal-disk.jpeg" },
  { name: "Cry for Me", image: "images/imaginal-disk.jpeg" },
  { name: "Killing Time", image: "images/imaginal-disk.jpeg" },
  { name: "She Looked Like Me!", image: "images/imaginal-disk.jpeg" },
  { name: "That’s My Floor", image: "images/imaginal-disk.jpeg" },
  { name: "Love is Everywhere", image: "images/imaginal-disk.jpeg" },
  { name: "Vampire in the Corner", image: "images/imaginal-disk.jpeg" },
  { name: "Feeling DiskInserted?", image: "images/imaginal-disk.jpeg" },
  { name: "True Blue Interlude", image: "images/imaginal-disk.jpeg" }
];

// --- Merge-sort style tournament ---
function mergeSort(list) {
  if (list.length <= 1) return list;
  const mid = Math.floor(list.length/2);
  const left = mergeSort(list.slice(0, mid));
  const right = mergeSort(list.slice(mid));
  return merge(left, right);
}

let leftArr, rightArr, merged = [], leftIdx = 0, rightIdx = 0, stack = [], step = 0;

function start() {
  // stack of subarrays to merge
  stack = [];
  function split(arr) {
    if (arr.length <= 1) return;
    const mid = Math.floor(arr.length/2);
    split(arr.slice(0,mid));
    split(arr.slice(mid));
    stack.push([arr.slice(0,mid), arr.slice(mid)]);
  }
  split([...Array(songs.length).keys()]);
  nextMerge();
}

function nextMerge() {
  if (!stack.length) { showResults([ ...merged ]); return; }
  [leftArr, rightArr] = stack.pop();
  leftIdx = 0; rightIdx = 0; merged = [];
  updateChoices();
}

function updateChoices() {
  if (leftIdx < leftArr.length && rightIdx < rightArr.length) {
    const l = songs[leftArr[leftIdx]];
    const r = songs[rightArr[rightIdx]];
    document.getElementById("left-img").src = l.image;
    document.getElementById("left-name").textContent = l.name;
    document.getElementById("right-img").src = r.image;
    document.getElementById("right-name").textContent = r.name;
    document.getElementById("progress").textContent =
      `Match ${step + 1}`;
  } else {
    // finish current merge
    while (leftIdx < leftArr.length) merged.push(leftArr[leftIdx++]);
    while (rightIdx < rightArr.length) merged.push(rightArr[rightIdx++]);
    // put merged back into stack for next merges
    if (stack.length) {
      const [a,b] = stack[stack.length-1];
      const target = (a.length + b.length === leftArr.length + rightArr.length)
        ? stack.pop()
        : null;
      if (target) stack.push([merged]);
    } else {
      songsOrder = merged;
    }
    nextMerge();
  }
}

function pick(side) {
  step++;
  if (side < 0) merged.push(leftArr[leftIdx++]);
  else merged.push(rightArr[rightIdx++]);
  updateChoices();
}

function showResults(order) {
  document.getElementById("game").style.display = "none";
  const list = document.getElementById("ranking");
  order.forEach(i => {
    const li = document.createElement("li");
    li.textContent = songs[i].name;
    list.appendChild(li);
  });
  document.getElementById("results").style.display = "block";
}

start();
</script>
</body>
</html>
